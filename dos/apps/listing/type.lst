00/00:          ; DOSDEFS.S
01/80:          ; THIS FILE CONTAINS IMPORTANT DEFINES USED IN DOS/281
01/80:          
01/80:          ; BIOS CALLS
01/80:          INDIR	= 1
01/80:          IRET	= 2
01/80:          SYSCALL	= 3
01/80:          SYSJUMP	= 4
01/80:          PRGM	= 5
01/80:          HALT	= 6
01/80:          
01/80:          ; SYSTEM CALLS
01/80:          S_EXIT	= 0
01/80:          S_PUTC	= 1
01/80:          S_GETC	= 2
01/80:          S_STAT	= 3
01/80:          S_PUTS	= 4
01/80:          S_INPUT	= 5
01/80:          S_OPEN	= 6
01/80:          S_CLOSE	= 7
01/80:          S_READ	= 8
01/80:          S_WRITE	= 9
01/80:          S_FSRCH	= 10
01/80:          S_NEXT	= 11
01/80:          S_DELET	= 12
01/80:          S_CREAT	= 13
01/80:          S_FREE	= 14
01/80:          S_EXEC	= 15
01/80:          
01/80:          ; MEMORY AREAS
01/80:          CF_NAME	= 0X60
01/80:          CF_SIZE	= 0X68
01/80:          CF_USR	= 0X6A
01/80:          DFT_USR	= 0X6B
01/80:          ARG_BNK	= 0X6C
01/80:          BD_FREE	= 0X6E
01/80:          MAX_IB	= 0X70
01/80:          MAX_DB	= 0X71
01/80:          CMDL_B	= 0X72
01/80:          AUTO_B	= 0X73
01/80:          KERNMEM	= 0X78
01/80:          BIOSMEM	= 0X7C
01/80:          
01/80:          ; DATA BANK ADDRESS
01/80:          DBANK	= 0X80		
01/80:          
01/80:          ; TYPE.S
01/80:          ; TYPE OUT A FILE ONTO THE CONSOLE
01/80:          
01/80:          	; START BY PROCESSING THE ARGUMENTS
01/80: 3000     START:	LOADI	A,0
01/81: A080     	STORE	[DBANK],A
01/83:          	
01/82:          	; SET UP STACK
01/82: 3C5E     	LOADI	D,0X60-2
01/84:          	
01/83:          	; SYSCALL RETURN BANK
01/83: 3801     	LOADI	C,1	
01/84: BB01     	STOREF	[D+1],C
01/86:          	
01/85:          	; GO TO ARGUMENT BANK
01/85: 8072     	LOAD	A,[CMDL_B]
01/86: A06C     	STORE	[ARG_BNK],A
01/87: A080     	STORE	[DBANK],A
01/89:          	
01/88:          	; SET UP POINTER
01/88: 3800     	LOADI	C,0
01/8A:          	
01/89:          	; SKIP THE INITIAL COMMAND
01/89: 9200     0:	LOADF	A,[C]
01/8A: 3420     	LOADI	B,0X20
01/8B: D100     	CMP	A,B
01/8C: F902     	BRBE	1F
01/8D: 5801     	ADDI	C,1
01/8E: FFFA     	JUMP	0B
01/90:          
01/8F:          	; LOOK FOR THE FIRST ARGUMENT
01/8F: 9200     1:	LOADF	A,[C]
01/90: 5000     	ADDI	A,0
01/91: F604     	BRZ	2F
01/92: D100     	CMP	A,B
01/93: F80A     	BRA	OPENARG
01/94: 5801     	ADDI	C,1
01/95: FFF9     	JUMP	1B
01/97:          	
01/96:          	; NO ARGUMENT, ERROR
01/96: 3000     2:	LOADI	A,0
01/97: A080     	STORE	[DBANK],A
01/99:          	
01/98: 3001     	LOADI	A,1
01/99: A06C     	STORE	[ARG_BNK],A
01/9A: 3000     	LOADI	A,ERROR0
01/9C:          	
01/9B:          	; PRINT ERROR MESSAGE
01/9B: 3404     	LOADI	B,S_PUTS
01/9C: 38CE     	LOADI	C,EXIT
01/9D: FF65     	JUMP	SYSCALL
01/9F:          
01/9E:          	
01/9E:          	; THERE IS AN ARG, TRY AND OPEN IT
01/9E: 3000     OPENARG:LOADI	A,0
01/9F: A080     	STORE	[DBANK],A
01/A1:          	
01/A0:          	; A = FILE STRING START
01/A0: 2200     	MOV	A,C
01/A2:          	
01/A1:          	; OPEN FILE
01/A1: 3406     	LOADI	B,S_OPEN
01/A2: 38A4     	LOADI	C,@+2
01/A3: FF5F     	JUMP	SYSCALL
01/A5:          	
01/A4:          	; CHECK FOR ERRORS
01/A4: 5000     	ADDI	A,0
01/A5: F606     	BRZ	0F
01/A7:          	
01/A6:          	; ERROR MESSAGE ARGS
01/A6: 3001     	LOADI	A,1
01/A7: A06C     	STORE	[ARG_BNK],A
01/A8: 300E     	LOADI	A,ERROR1
01/AA:          	
01/A9:          	; PRINT ERROR MESSAGE
01/A9: 3404     	LOADI	B,S_PUTS
01/AA: 38CE     	LOADI	C,EXIT
01/AB: FF57     	JUMP	SYSCALL
01/AD:          	
01/AC:          	; RESET STATE
01/AC: 3002     0:	LOADI	A,2
01/AD: A06C     	STORE	[ARG_BNK],A
01/AE: 3000     	LOADI	A,0
01/B0:          	
01/AF:          	; READ BLOCK
01/AF: A000     READF:	STORE	[COUNT],A
01/B0: 3408     	LOADI	B,S_READ
01/B1: 38B3     	LOADI	C,@+2
01/B2: FF50     	JUMP	SYSCALL
01/B4:          	
01/B3:          	; CHECK FOR ERRORS
01/B3: 5000     	ADDI	A,0
01/B4: F719     	BRNZ	EXIT
01/B6:          	
01/B5:          	; SET DEFAULT POINTER AND BANK
01/B5: 3000     	LOADI	A,0
01/B6: 3402     	LOADI	B,2
01/B8:          	
01/B7:          	; LOOP TO OUTPUT CHARACTER
01/B7: A001     OUTPUT:	STORE	[POINTER],A
01/B8: A402     	STORE	[BANK],B 
01/B9: A480     	STORE	[DBANK],B
01/BA: 9000     	LOADF	A,[A]
01/BC:          	
01/BB:          	; MAKE SURE IT ISN'T 0
01/BB: 5000     	ADDI	A,0
01/BC: F611     	BRZ	EXIT
01/BE:          	
01/BD:          	; PRINT CHARACTER MESSAGE
01/BD: 3400     	LOADI	B,0
01/BE: A480     	STORE	[DBANK],B
01/BF: 3401     	LOADI	B,S_PUTC
01/C0: 38C2     	LOADI	C,@+2
01/C1: FF41     	JUMP	SYSCALL
01/C3:          	
01/C2:          	; NEXT CHARACTER
01/C2: 8001     	LOAD	A,[POINTER]
01/C3: 8402     	LOAD	B,[BANK]
01/C4: 5001     	ADDI	A,1
01/C5: F5F1     	BRNN	OUTPUT
01/C6: 3000     	LOADI	A,0
01/C7: 5401     	ADDI	B,1
01/C8: 3806     	LOADI	C,6
01/C9: D600     	CMP	B,C
01/CA: F7EC     	BRNZ	OUTPUT
01/CC:          	
01/CB:          	; NEXT BLOCK
01/CB: 8000     	LOAD	A,[COUNT]
01/CC: 5001     	ADDI	A,1
01/CD: FFE1     	JUMP	READF
01/CF:          
01/CE:          	; EXIT PROGRAM
01/CE: 3400     EXIT:	LOADI	B,0
01/CF: FF34     	JUMP	SYSJUMP
01/D1:          
01/D0:          
01/D0:          .DATA
01/D0:          
01/00:          	; ERROR MESSAGES
01/00: 4E4F2041
       5247554D
       454E540A
       0D00     .DEFL BYTE ERROR0	"NO ARGUMENT",0X0A,0X0D,0
01/0E: 43414E27
       54204F50
       454E2046
       494C450A
       0D00     .DEFL BYTE ERROR1	"CAN'T OPEN FILE",0X0A,0X0D,0
01/20:          
01/20:          .BANK	0
00/00:          .BSS
00/00:          
00/00:          	; READ BLOCK COUNTER
00/00: 00       .DEFL BYTE COUNT	0
00/01:          
00/01:          	; INFORMATION ON WHAT CHARACTER IS BEING PRINTED
00/01: 00       .DEFL BYTE POINTER	0
