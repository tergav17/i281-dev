; 50 HZ DELAY TEST
; GAVIN TERSTEEG, 2024

AY0_ADR	= 0XB0
AY1_ADR	= 0XB2
AY0_WR	= 0XB1
AY1_WR	= 0XB3
AY0_RD	= 0XB0
AY1_RD	= 0XB2

	; SET UP AY CHIPS
	LOADI	A,7
	STORE	[AY1_ADR],A
	LOADI	A,0XBF
	STORE	[AY1_WR],A

	; RESET D REGISTER
	LOADI	D,0

	; SET RESET STATE
	LOADI	A,15
	STORE	[AY1_ADR],A
	LOADI	A,1
	STORE	[AY1_WR],A

	; MAIN LOOP
LOOP:	ADDI	D,1
	
	; WAIT FOR 50 HZ FLAG
	LOADI	A,14
	STORE	[AY1_ADR],A
0:	LOAD	A,[AY1_RD]
	SHIFTR	A
	BRNC	0B

	; RESET 50 HZ FLAG
	LOADI	A,15
	STORE	[AY1_ADR],A
	LOADI	A,0
	STORE	[AY1_WR],A
	LOADI	A,1
	STORE	[AY1_WR],A
	JUMP	LOOP
